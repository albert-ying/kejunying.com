<!DOCTYPE html>
<html><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta name="description" content="//localhost:1313/">
    <meta name="keywords" content="personal, science">

    <meta property="og:site_name" content="Kejun Albert Ying">
    <meta property="og:title" content="Kejun Albert Ying">
    <meta property="og:description" content="Visualizing the State of the Amsterdam Housing Market">
    <meta property="og:type" content="website">
    <meta property="og:url" content="//localhost:1313/blog/visualizing-the-state-of-the-amsterdam-housing-market/">
    <meta property="og:image" content="//localhost:1313/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="//localhost:1313/blog/visualizing-the-state-of-the-amsterdam-housing-market/">
    <meta name="twitter:image" content="//localhost:1313/">

    
    <link rel="stylesheet" type="text/css" href="//localhost:1313/css/style.css">
    
    
    
        
        <link rel="stylesheet" href="/custom_style.css" integrity="">
    

    <link rel="stylesheet" href="https://use.typekit.net/jxt2fnp.css"> 
    <link rel="stylesheet" href="https://use.typekit.net/uwd7war.css"> 
    <link href="https://fonts.cdnfonts.com/css/cooper-hewitt" rel="stylesheet">
    
    
        <meta name="description" content="Kejun (Albert) Ying&#39;s personal website">
    

    
        
            <link rel="shortcut icon" href="/Albert_headshot.jpg">
        
    

    
    
    
    
    
    <title>visualizing the state of the amsterdam housing market | kejun albert ying</title>
</head><body><div id="top-stripe"></div><div id="content">

    <div class="article-nav-outer">
        <div class="article-nav-inner">
            <a class="internal" hyphens="none" href='/blog'>← back to blog</a>
        </div>
    </div>

<h2 class="article-title">Visualizing the State of the Amsterdam Housing Market</h2>
<div id="doc">
    <div class="hanging-subtitle">
        
                
        
            
                <p>20 June 2021</p>
            
        
    </div>
<style type="text/css">
body {
  background-color: #EBEBEB;
}

table {
  font-family: "Nunito Sans", sans-serif;
}

code {
  background: #E0E0E0;
}

img {
  max-width: 90%;
}
</style>
<p class="stand-out-paragraph" 
     
        style="background-color: #acc8d4"
    >
    For this post, I decided to hide the code chunks by default to improve legibility. You can click on <em>Show code</em> to expand the code.
</p>
<h3 id="introduction">Introduction</h3>
<p>I&rsquo;m at the age where a lot of my peers start thinking about buying a home. It is a major conversation topic around the office, and these conversations are not often filled with optimism and excitement. Oslo is a notoriously expensive city to live in, and the housing market is very tough.</p>
<div class="sidenote" >This conclusion is based on a survey from Deloitte in 2020 where they surveyed millennials and Gen Z kids both before and after the onset of the pandemic</div>
<p>Of all the worrying events in 2020, millennials and Gen Z kids ranked financial instability as the second most common driver of stress, the most common being the welfare of their family (<a href="https://www2.deloitte.com/content/dam/Deloitte/global/Documents/About-Deloitte/deloitte-2020-millennial-survey.pdf">source</a>). Today I want to dissect one of the possible causes of this <em>economic anxiety</em>: <strong>the housing market</strong>. Now, I&rsquo;m not an economist nor a financial expert. Nonetheless, I believe I can leverage some of my knowledge of data wrangling and analysis to contribute a small piece to this topic. My insight into the Oslo housing market is fairly limited to so far and there&rsquo;s many nuances I don&rsquo;t fully understand yet, but I do think I have some relevant knowledge of the Dutch housing market. So today I&rsquo;ll dive into some data on the Dutch market, and particularly the Amsterdam housing market. There&rsquo;s countless stories about the Amsterdam housing market and how terrible it is for new buyers, similar to the Oslo housing market. However, in my opinion the Amsterdam housing market is already a few steps ahead of the Oslo market, and hopefully the Amsterdam market can offer some warnings about what the Oslo housing market might look like in a few years without some policy corrections.</p>
<p>This will be a fairly basic data analysis and visualization post, I can&rsquo;t claim that this is an exhaustive list and that I didn&rsquo;t miss some nuances, but I&rsquo;ll give it . I collected some data from the Amsterdam Real Estate Association (<a href="https://www.mva.nl">Makelaars Vereniging Amsterdam; MVA</a>) and statistics from the Central Bureau for Statistics (<a href="https://www.cbs.nl">Centraal Bureau for de Statistiek; CBS</a>). As usual, I&rsquo;ll be using <code>{tidyverse}</code> <em>a lot</em>. I&rsquo;ve also recently started using the <code>{ggtext}</code> package to manage the text elements in my plots, inspired by Cédric Scherer (<a href="https://twitter.com/CedScherer">@CedScherer</a>). I&rsquo;ll use the <code>{gt}</code> package to spice up some of the tables, and <code>{patchwork}</code> for arranging plots. I&rsquo;ll use the <code>{cbsodataR}</code> to download data from the Central Bureau for Statistics (<a href="https://www.cbs.nl">CBS</a>).</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tidyverse)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggtext)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(patchwork)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(magrittr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(showtext)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(gt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">font_add_google</span>(name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Nunito Sans&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nunito-sans&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">showtext_auto</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">theme_set</span>(ggthemes<span style="color:#f92672">::</span><span style="color:#a6e22e">theme_economist</span>(base_family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nunito-sans&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>    rect <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#EBEBEB&#34;</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>),
</span></span><span style="display:flex;"><span>    plot.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(
</span></span><span style="display:flex;"><span>      fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#EBEBEB&#34;</span>,
</span></span><span style="display:flex;"><span>      color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(
</span></span><span style="display:flex;"><span>      fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#EBEBEB&#34;</span>,
</span></span><span style="display:flex;"><span>      color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    plot.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(
</span></span><span style="display:flex;"><span>      margin <span style="color:#f92672">=</span> <span style="color:#a6e22e">margin</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;pt&#34;</span>)
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    plot.title.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;plot&#34;</span>,
</span></span><span style="display:flex;"><span>    plot.subtitle <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(
</span></span><span style="display:flex;"><span>      hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>      margin <span style="color:#f92672">=</span> <span style="color:#a6e22e">margin</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;pt&#34;</span>)
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    plot.caption <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>    plot.caption.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;plot&#34;</span>,
</span></span><span style="display:flex;"><span>    axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(
</span></span><span style="display:flex;"><span>      orientation <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;left-rotated&#34;</span>, face <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>,
</span></span><span style="display:flex;"><span>      margin <span style="color:#f92672">=</span> <span style="color:#a6e22e">margin</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;pt&#34;</span>)
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>    legend.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bottom&#34;</span>,
</span></span><span style="display:flex;"><span>    legend.box <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;vertical&#34;</span>,
</span></span><span style="display:flex;"><span>    legend.text <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>  ))
</span></span></code></pre></div></details>
<h3 id="getting-the-data">Getting the data</h3>
<div class="sidenote"  style="padding-top: 10em;">There are <a href="https://docs.ropensci.org/tabulizer/">R packages</a> that can parse PDF files, but in my experience they can be clunky. In this case the simplest solution seemed the best, despite requiring some manual work</div>
<p>The first piece of data I&rsquo;ll use comes from the Amsterdam Real Estate Association. They publish quarterly data on a number of variables about the Amsterdam housing market (<a href="https://www.mva.nl/over-de-mva/mva/kwartaalcijfers">link</a>), inclusing asking price, final price paid, number of properties put on the market, number of properties sold and a few more back to the first quarter of 2012. <em>Obviously</em>, these numbers all come in pdf-format, because the people writing quarterly reports apparently have a <em>massive hatred</em> towards people that want to analyze this data. I downloaded the reports, used the online tool <a href="https://pdftables.com">PDFTables</a> to convert them to Excel, and then stitched the tables together manually. Of course (remember the authors have a <em>massive hatred</em> towards us), the formatting of the numbers in the tables weren&rsquo;t consistent between different quarterly reports, so I had to do some cleaning in R. I put each table in a separate sheet and then used functionality from the <code>{readxl}</code> package to load each table into a different variable and then do the cleaning per table. This was a bit cumbersome.</p>
<p>You can look at the code I used to load and merge the files. It&rsquo;s a bit of a mess:</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>asking_price <span style="color:#f92672">&lt;-</span> readxl<span style="color:#f92672">::</span><span style="color:#a6e22e">read_xlsx</span>(<span style="color:#e6db74">&#34;./data/MVA_kwartaalcijfers.xlsx&#34;</span>,
</span></span><span style="display:flex;"><span>  sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  janitor<span style="color:#f92672">::</span><span style="color:#a6e22e">clean_names</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    type_woning <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_factor</span>(type_woning),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(<span style="color:#a6e22e">where</span>(is.double), <span style="color:#f92672">~</span> .x <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e3</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">where</span>(is.character),
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">~</span> <span style="color:#a6e22e">parse_number</span>(<span style="color:#a6e22e">str_remove_all</span>(.x, <span style="color:#a6e22e">fixed</span>(<span style="color:#e6db74">&#34; &#34;</span>)))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(<span style="color:#a6e22e">starts_with</span>(<span style="color:#e6db74">&#34;x&#34;</span>),
</span></span><span style="display:flex;"><span>    names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;date&#34;</span>, values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;asking_price&#34;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>transaction_price <span style="color:#f92672">&lt;-</span> readxl<span style="color:#f92672">::</span><span style="color:#a6e22e">read_xlsx</span>(<span style="color:#e6db74">&#34;./data/MVA_kwartaalcijfers.xlsx&#34;</span>,
</span></span><span style="display:flex;"><span>  sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  janitor<span style="color:#f92672">::</span><span style="color:#a6e22e">clean_names</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    type_woning <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_factor</span>(type_woning),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">where</span>(is.character),
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">~</span> <span style="color:#a6e22e">parse_number</span>(<span style="color:#a6e22e">str_remove_all</span>(.x, <span style="color:#a6e22e">fixed</span>(<span style="color:#e6db74">&#34; &#34;</span>)))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(<span style="color:#a6e22e">starts_with</span>(<span style="color:#e6db74">&#34;x&#34;</span>),
</span></span><span style="display:flex;"><span>    names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;date&#34;</span>, values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transaction_price&#34;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>price_per_m2 <span style="color:#f92672">&lt;-</span> readxl<span style="color:#f92672">::</span><span style="color:#a6e22e">read_xlsx</span>(<span style="color:#e6db74">&#34;./data/MVA_kwartaalcijfers.xlsx&#34;</span>,
</span></span><span style="display:flex;"><span>  sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  janitor<span style="color:#f92672">::</span><span style="color:#a6e22e">clean_names</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    type_woning <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_factor</span>(type_woning),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(<span style="color:#a6e22e">where</span>(is.double), <span style="color:#f92672">~</span> .x <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e3</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">where</span>(is.character),
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">~</span> <span style="color:#a6e22e">parse_number</span>(<span style="color:#a6e22e">str_remove_all</span>(.x, <span style="color:#a6e22e">fixed</span>(<span style="color:#e6db74">&#34; &#34;</span>)))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(<span style="color:#a6e22e">starts_with</span>(<span style="color:#e6db74">&#34;x&#34;</span>),
</span></span><span style="display:flex;"><span>    names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;date&#34;</span>, values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;price_per_m2&#34;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n_offered <span style="color:#f92672">&lt;-</span> readxl<span style="color:#f92672">::</span><span style="color:#a6e22e">read_xlsx</span>(<span style="color:#e6db74">&#34;./data/MVA_kwartaalcijfers.xlsx&#34;</span>,
</span></span><span style="display:flex;"><span>  sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  janitor<span style="color:#f92672">::</span><span style="color:#a6e22e">clean_names</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    type_woning <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_factor</span>(type_woning),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">where</span>(is.character),
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">~</span> <span style="color:#a6e22e">parse_number</span>(<span style="color:#a6e22e">str_remove_all</span>(.x, <span style="color:#a6e22e">fixed</span>(<span style="color:#e6db74">&#34; &#34;</span>)))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(<span style="color:#a6e22e">starts_with</span>(<span style="color:#e6db74">&#34;x&#34;</span>),
</span></span><span style="display:flex;"><span>    names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;date&#34;</span>, values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;n_offered&#34;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n_sold <span style="color:#f92672">&lt;-</span> readxl<span style="color:#f92672">::</span><span style="color:#a6e22e">read_xlsx</span>(<span style="color:#e6db74">&#34;./data/MVA_kwartaalcijfers.xlsx&#34;</span>,
</span></span><span style="display:flex;"><span>  sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  janitor<span style="color:#f92672">::</span><span style="color:#a6e22e">clean_names</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    type_woning <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_factor</span>(type_woning),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">where</span>(is.character),
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">~</span> <span style="color:#a6e22e">parse_number</span>(<span style="color:#a6e22e">str_remove_all</span>(.x, <span style="color:#a6e22e">fixed</span>(<span style="color:#e6db74">&#34; &#34;</span>)))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(<span style="color:#a6e22e">starts_with</span>(<span style="color:#e6db74">&#34;x&#34;</span>),
</span></span><span style="display:flex;"><span>    names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;date&#34;</span>, values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;n_sold&#34;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mortgage_months <span style="color:#f92672">&lt;-</span> readxl<span style="color:#f92672">::</span><span style="color:#a6e22e">read_xlsx</span>(<span style="color:#e6db74">&#34;./data/MVA_kwartaalcijfers.xlsx&#34;</span>,
</span></span><span style="display:flex;"><span>  sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>
</span></span><span style="display:flex;"><span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  janitor<span style="color:#f92672">::</span><span style="color:#a6e22e">clean_names</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    type_woning <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_factor</span>(type_woning),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">where</span>(is.character),
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">~</span> <span style="color:#a6e22e">parse_number</span>(<span style="color:#a6e22e">str_remove_all</span>(.x, <span style="color:#a6e22e">fixed</span>(<span style="color:#e6db74">&#34; &#34;</span>)))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(<span style="color:#a6e22e">starts_with</span>(<span style="color:#e6db74">&#34;x&#34;</span>),
</span></span><span style="display:flex;"><span>    names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;date&#34;</span>, values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mortgage_months&#34;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tightness_index <span style="color:#f92672">&lt;-</span> readxl<span style="color:#f92672">::</span><span style="color:#a6e22e">read_xlsx</span>(<span style="color:#e6db74">&#34;./data/MVA_kwartaalcijfers.xlsx&#34;</span>,
</span></span><span style="display:flex;"><span>  sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  janitor<span style="color:#f92672">::</span><span style="color:#a6e22e">clean_names</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    type_woning <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_factor</span>(type_woning),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">where</span>(is.character),
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">~</span> <span style="color:#a6e22e">parse_number</span>(<span style="color:#a6e22e">str_replace_all</span>(.x, <span style="color:#e6db74">&#34;,&#34;</span>, <span style="color:#e6db74">&#34;.&#34;</span>))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(<span style="color:#a6e22e">starts_with</span>(<span style="color:#e6db74">&#34;x&#34;</span>),
</span></span><span style="display:flex;"><span>    names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;date&#34;</span>, values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tightness_index&#34;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data_merged <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">inner_join</span>(asking_price, transaction_price) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">inner_join</span>(price_per_m2) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">inner_join</span>(n_offered) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">inner_join</span>(n_sold) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">inner_join</span>(mortgage_months) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">inner_join</span>(tightness_index) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    asking_price <span style="color:#f92672">=</span> <span style="color:#a6e22e">ifelse</span>(asking_price <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1e5</span>,
</span></span><span style="display:flex;"><span>      asking_price <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e3</span>,
</span></span><span style="display:flex;"><span>      asking_price
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    transaction_price <span style="color:#f92672">=</span> <span style="color:#a6e22e">ifelse</span>(transaction_price <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1e5</span>,
</span></span><span style="display:flex;"><span>      transaction_price <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e3</span>,
</span></span><span style="display:flex;"><span>      transaction_price
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    price_per_m2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">ifelse</span>(price_per_m2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1e4</span>,
</span></span><span style="display:flex;"><span>      price_per_m2 <span style="color:#f92672">/</span> <span style="color:#ae81ff">1e3</span>,
</span></span><span style="display:flex;"><span>      price_per_m2
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">write_rds</span>(data_merged, <span style="color:#e6db74">&#34;./data/data_merged.rds&#34;</span>)
</span></span></code></pre></div></details>
<p>Let&rsquo;s have a look at the dataset.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>data_merged <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read_rds</span>(<span style="color:#e6db74">&#34;./data/data_merged.rds&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">glimpse</span>(data_merged)
</span></span></code></pre></div></details>
<pre><code>Rows: 259
Columns: 9
$ type_woning       &lt;fct&gt; Tussenwoning, Tussenwoning, Tussenwoning, Tussenwoni…
$ date              &lt;chr&gt; &quot;x1e_kw_2012&quot;, &quot;x2e_kw_2012&quot;, &quot;x3e_kw_2012&quot;, &quot;x4e_kw…
$ asking_price      &lt;dbl&gt; 298444, 269778, 241000, 270500, 354056, 305611, 3478…
$ transaction_price &lt;dbl&gt; 278911, 252278, 230111, 256667, 334472, 281528, 3230…
$ price_per_m2      &lt;dbl&gt; 2492, 2370, 2308, 2291, 2648, 2203, 2412, 2344, 3002…
$ n_offered         &lt;dbl&gt; 655, 732, 717, 717, 676, 732, 715, 617, 534, 573, 51…
$ n_sold            &lt;dbl&gt; 99, 119, 107, 153, 93, 93, 123, 148, 121, 178, 158, …
$ mortgage_months   &lt;dbl&gt; 126, 103, 85, 125, 147, 113, 135, 85, 121, 57, 74, 6…
$ tightness_index   &lt;dbl&gt; 19.8, 18.5, 20.1, 14.1, 21.8, 23.6, 17.4, 12.5, 13.3…
</code></pre>
<p>From this dataset, I want to create a few new variables. I want to create a date format from the quarterly date. Currently it&rsquo;s in the format <code>&quot;x1e_kw_2012&quot;</code>. We&rsquo;ll extract the year and the quarter. Since there&rsquo;s 4 quarters in the 12 months, we&rsquo;ll multiply the quarter by 3 and then create a date format. We&rsquo;ll also calculate the percentage difference between the asking price and the price paid, and the percentage difference between the houses offered and the houses sold. I&rsquo;ll also translate the character string from Dutch to English using the <code>case_when()</code> function.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>data <span style="color:#f92672">&lt;-</span> data_merged <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rename</span>(type <span style="color:#f92672">=</span> type_woning) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    quarter <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_extract</span>(date, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;x(.*?)e&#34;</span>),
</span></span><span style="display:flex;"><span>    quarter <span style="color:#f92672">=</span> <span style="color:#a6e22e">parse_number</span>(quarter),
</span></span><span style="display:flex;"><span>    year <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_extract</span>(date, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;kw_(.*)&#34;</span>),
</span></span><span style="display:flex;"><span>    year <span style="color:#f92672">=</span> <span style="color:#a6e22e">parse_number</span>(year),
</span></span><span style="display:flex;"><span>    date <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#a6e22e">str_glue</span>(<span style="color:#e6db74">&#34;{year}-{(quarter * 3)}-01&#34;</span>)),
</span></span><span style="display:flex;"><span>    diff_ask_paid <span style="color:#f92672">=</span> transaction_price <span style="color:#f92672">-</span> asking_price,
</span></span><span style="display:flex;"><span>    diff_ask_paid_perc <span style="color:#f92672">=</span> diff_ask_paid <span style="color:#f92672">/</span> asking_price,
</span></span><span style="display:flex;"><span>    diff_offered_sold <span style="color:#f92672">=</span> n_offered <span style="color:#f92672">-</span> n_sold,
</span></span><span style="display:flex;"><span>    diff_offered_sold_perc <span style="color:#f92672">=</span> diff_offered_sold <span style="color:#f92672">/</span> n_offered,
</span></span><span style="display:flex;"><span>    perc_sold <span style="color:#f92672">=</span> n_sold <span style="color:#f92672">/</span> n_offered,
</span></span><span style="display:flex;"><span>    type <span style="color:#f92672">=</span> <span style="color:#a6e22e">case_when</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(type, <span style="color:#e6db74">&#34;Totaal&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Total&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(type, <span style="color:#e6db74">&#34;&lt;= 1970&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Apartments (pre-1970)&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(type, <span style="color:#e6db74">&#34;&gt; 1970&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Apartments (post-1970)&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(type, <span style="color:#e6db74">&#34;Tussenwoning&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Terraced house&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(type, <span style="color:#e6db74">&#34;Hoekwoning&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Corner house&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(type, <span style="color:#e6db74">&#34;Vrijstaand&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Detached house&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(type, <span style="color:#e6db74">&#34;2-onder-1-kap&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Semi-detached house&#34;</span>
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    type <span style="color:#f92672">=</span> <span style="color:#a6e22e">factor</span>(type, levels <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;Apartments (pre-1970)&#34;</span>, <span style="color:#e6db74">&#34;Apartments (post-1970)&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;Terraced house&#34;</span>, <span style="color:#e6db74">&#34;Corner house&#34;</span>, <span style="color:#e6db74">&#34;Detached house&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;Semi-detached house&#34;</span>, <span style="color:#e6db74">&#34;Total&#34;</span>
</span></span><span style="display:flex;"><span>    ))
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">glimpse</span>()
</span></span></code></pre></div></details>
<pre><code>Rows: 259
Columns: 16
$ type                   &lt;fct&gt; Terraced house, Terraced house, Terraced house,…
$ date                   &lt;date&gt; 2012-03-01, 2012-06-01, 2012-09-01, 2012-12-01…
$ asking_price           &lt;dbl&gt; 298444, 269778, 241000, 270500, 354056, 305611,…
$ transaction_price      &lt;dbl&gt; 278911, 252278, 230111, 256667, 334472, 281528,…
$ price_per_m2           &lt;dbl&gt; 2492, 2370, 2308, 2291, 2648, 2203, 2412, 2344,…
$ n_offered              &lt;dbl&gt; 655, 732, 717, 717, 676, 732, 715, 617, 534, 57…
$ n_sold                 &lt;dbl&gt; 99, 119, 107, 153, 93, 93, 123, 148, 121, 178, …
$ mortgage_months        &lt;dbl&gt; 126, 103, 85, 125, 147, 113, 135, 85, 121, 57, …
$ tightness_index        &lt;dbl&gt; 19.8, 18.5, 20.1, 14.1, 21.8, 23.6, 17.4, 12.5,…
$ quarter                &lt;dbl&gt; 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4,…
$ year                   &lt;dbl&gt; 2012, 2012, 2012, 2012, 2013, 2013, 2013, 2013,…
$ diff_ask_paid          &lt;dbl&gt; -19533, -17500, -10889, -13833, -19584, -24083,…
$ diff_ask_paid_perc     &lt;dbl&gt; -0.065449465, -0.064868151, -0.045182573, -0.05…
$ diff_offered_sold      &lt;dbl&gt; 556, 613, 610, 564, 583, 639, 592, 469, 413, 39…
$ diff_offered_sold_perc &lt;dbl&gt; 0.848854962, 0.837431694, 0.850767085, 0.786610…
$ perc_sold              &lt;dbl&gt; 0.1511450, 0.1625683, 0.1492329, 0.2133891, 0.1…
</code></pre>
<div class="sidenote"  style="padding-top: 1em;">I&rsquo;ll use a color palette and legend design I shamelessly stole from <a href="https://twitter.com/CedScherer">Cédric Scherer</a></div>
<p>The first thing that seems interesting to do is to plot the percentage difference between the asking price and the price paid. This will give us an indication of the trend in overpaying on different types of properties. Let&rsquo;s use a simple line graph to visualize the percentage overpay.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>colors <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;#019868&#34;</span>, <span style="color:#e6db74">&#34;#9dd292&#34;</span>, <span style="color:#e6db74">&#34;#ec0b88&#34;</span>, <span style="color:#e6db74">&#34;#651eac&#34;</span>, <span style="color:#e6db74">&#34;#e18a1e&#34;</span>, <span style="color:#e6db74">&#34;#2b7de5&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(type <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Total&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(type) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    n_total <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n_sold),
</span></span><span style="display:flex;"><span>    type_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_glue</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;{type} (n={format(n_total, big.mark = \&#34;.\&#34;, decimal.mark = \&#34;,\&#34;)})&#34;</span>
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    type_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_replace</span>(type_label, <span style="color:#e6db74">&#34;\\) \\(&#34;</span>, <span style="color:#e6db74">&#34;, &#34;</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">arrange</span>(type) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(type_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">factor</span>(type_label)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> date, y <span style="color:#f92672">=</span> diff_ask_paid_perc, color <span style="color:#f92672">=</span> type_label)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey30&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(
</span></span><span style="display:flex;"><span>    size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.2</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.8</span>,
</span></span><span style="display:flex;"><span>    lineend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;round&#34;</span>, key_glyph <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;point&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Overbidding has become the new normal&#34;</span>,
</span></span><span style="display:flex;"><span>    subtitle <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_Paying as much as 5% over asking price is common the past few years_&#34;</span>,
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Percentage difference between\nasking price and price paid&#34;</span>,
</span></span><span style="display:flex;"><span>    color <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    caption <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_**Data**: MVA_&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_percent</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_manual</span>(
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> colors,
</span></span><span style="display:flex;"><span>    guide <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(
</span></span><span style="display:flex;"><span>      title.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>, title.hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, nrow <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;right&#34;</span>,
</span></span><span style="display:flex;"><span>      override.aes <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>    plot.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>),
</span></span><span style="display:flex;"><span>    axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(width <span style="color:#f92672">=</span> grid<span style="color:#f92672">::</span><span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">2.5</span>, <span style="color:#e6db74">&#34;in&#34;</span>)),
</span></span><span style="display:flex;"><span>    legend.key <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>)
</span></span><span style="display:flex;"><span>  )
</span></span></code></pre></div></details>
<img src="index.markdown_strict_files/figure-markdown_strict/plot-overpay-1.png" width="768" />
<p>Prior to 2014, most properties in Amsterdam were sold at about 6% below asking price, in the last quarter of 2020, that trend had changed to more than 3.5% above asking. The variance is obviously larger for detached and semi-detached houses, since those are both expensive and scarce in Amsterdam, and are thus also bought and sold less often. The table below shows the stats for the first quarter of 2021. Apart from semi-detached houses, most other properties were sold at 4% over asking or more. The types of properties most accessible to first-time buyers are obviously the apartments. Either the older type in the inner city, or the newer apartments in the suburbs. People buying pre-1970 apartments spent more than €28 000 over the asking price and people buying apartments built after 1970 spent on average more than €18 000 over the asking price.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>data <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(
</span></span><span style="display:flex;"><span>    type <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Total&#34;</span>,
</span></span><span style="display:flex;"><span>    date <span style="color:#f92672">==</span> <span style="color:#a6e22e">max</span>(date)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">select</span>(type, diff_ask_paid_perc, diff_ask_paid, transaction_price, n_sold) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">arrange</span>(<span style="color:#f92672">-</span>diff_ask_paid_perc) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">gt</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">cols_align</span>(columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;type&#34;</span>, align <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;left&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fmt_percent</span>(columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;diff_ask_paid_perc&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fmt_currency</span>(
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;diff_ask_paid&#34;</span>, currency <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;EUR&#34;</span>,
</span></span><span style="display:flex;"><span>    decimals <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, sep_mark <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fmt_currency</span>(
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transaction_price&#34;</span>, currency <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;EUR&#34;</span>,
</span></span><span style="display:flex;"><span>    decimals <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, sep_mark <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fmt_number</span>(
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;n_sold&#34;</span>, sep_mark <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>,
</span></span><span style="display:flex;"><span>    drop_trailing_zeros <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">cols_label</span>(
</span></span><span style="display:flex;"><span>    type <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;Property type&lt;/h5&gt;&#34;</span>),
</span></span><span style="display:flex;"><span>    diff_ask_paid_perc <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;Percentage overpay&lt;/h5&gt;&#34;</span>),
</span></span><span style="display:flex;"><span>    diff_ask_paid <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;Mean overpay&lt;/h5&gt;&#34;</span>),
</span></span><span style="display:flex;"><span>    transaction_price <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;Mean transaction price&lt;/h5&gt;&#34;</span>),
</span></span><span style="display:flex;"><span>    n_sold <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;Number of properties&lt;br&gt;sold in period&lt;/h5&gt;&#34;</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tab_header</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h3 style=&#39;margin-bottom: 0&#39;&gt;Difference between&lt;br&gt;asking price and price paid&lt;/h3&gt;&#34;</span>),
</span></span><span style="display:flex;"><span>    subtitle <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h4 style=&#39;margin-top: 0&#39;&gt;&lt;em&gt;Data from the first quarter of 2021&lt;/em&gt;&lt;/h4&gt;&#34;</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tab_source_note</span>(source_note <span style="color:#f92672">=</span> <span style="color:#a6e22e">md</span>(<span style="color:#e6db74">&#34;_**Data**: MVA_&#34;</span>)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tab_options</span>(table.background.color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#EBEBEB&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">gtsave</span>(<span style="color:#e6db74">&#34;overpay-table.png&#34;</span>, expand <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
</span></span></code></pre></div></details>
<p>What contributed to this price increase? A simple supply-and-demand plays a part. The figure below shows the &ldquo;tightness index&rdquo; (Dutch: &ldquo;krapte indicator&rdquo;) over time. This number represents the number of choices a potential buyer has. This number is calculated per quarter by dividing the number of properties on the market halfway through the quarter divided by the number of transactions over the entire quarter. This number is then multiplied by 3 to correct for the fact that the number is calculated per quarter instead of per month. When the &ldquo;tightness index&rdquo; is below 5, it&rsquo;s considered a &ldquo;sellers market&rdquo; (source: <a href="https://www.nvm.nl/wonen/marktinformatie/">NVM</a>). A larger number is good for buyers, a smaller number is good for sellers. In the first quarter of 2021, the number was exactly 2. It varies a bit per property type, but for apartments specifically it hasn&rsquo;t been higher than 3 since 2016. This means that first-time buyers often don&rsquo;t have a choice between more than 2 or 3 apartments per month. I tried to find some data on how many people currently are interested in buying a home in Amsterdam, but I couldn&rsquo;t find anything solid. There&rsquo;s only anecdotal evidence from viewings where within a year, the number of people interested in viewing a property has increased to 80 in 2020, compared to about 55 a year earlier (source: <a href="https://www.parool.nl/amsterdam/huizenmarkt-is-gekkenhuis-kopers-profiteren-voor-1-april-nog-van-voordelige-belastingregel~bcadc579/">Parool</a>).</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>data <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(type <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Total&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(type) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    n_total <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n_sold),
</span></span><span style="display:flex;"><span>    type_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_glue</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;{type} (n={format(n_total, big.mark = \&#34;.\&#34;, decimal.mark = \&#34;,\&#34;)})&#34;</span>
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    type_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_replace</span>(type_label, <span style="color:#e6db74">&#34;\\) \\(&#34;</span>, <span style="color:#e6db74">&#34;, &#34;</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">arrange</span>(type) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(type_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">factor</span>(type_label)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> date, y <span style="color:#f92672">=</span> tightness_index, color <span style="color:#f92672">=</span> type_label)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_rect</span>(
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> <span style="color:#a6e22e">tibble</span>(),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">aes</span>(
</span></span><span style="display:flex;"><span>      xmin <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#f92672">-</span><span style="color:#66d9ef">Inf</span>), xmax <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#66d9ef">Inf</span>),
</span></span><span style="display:flex;"><span>      ymin <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">10</span>), ymax <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">10</span>, <span style="color:#66d9ef">Inf</span>),
</span></span><span style="display:flex;"><span>      fill <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Sellers market&#34;</span>, <span style="color:#e6db74">&#34;Balanced market&#34;</span>, <span style="color:#e6db74">&#34;Buyers market&#34;</span>)
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, key_glyph <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;point&#34;</span>, inherit.aes <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey30&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.2</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.8</span>, lineend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;round&#34;</span>, key_glyph <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;point&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Amsterdam has had a sellers market for nearly 5 years&#34;</span>,
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Indicator of _\&#34;density\&#34;_ on the housing market&#34;</span>,
</span></span><span style="display:flex;"><span>    color <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Type of market:&#34;</span>,
</span></span><span style="display:flex;"><span>    caption <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_**Data**: MVA_&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_date</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(trans <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;reverse&#34;</span>, expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_manual</span>(
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> colors,
</span></span><span style="display:flex;"><span>    guide <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(
</span></span><span style="display:flex;"><span>      title.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>, title.hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, nrow <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;right&#34;</span>, order <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      override.aes <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_fill_manual</span>(
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;#F5E000&#34;</span>, <span style="color:#e6db74">&#34;#00B300&#34;</span>, <span style="color:#e6db74">&#34;#D1000E&#34;</span>),
</span></span><span style="display:flex;"><span>    limits <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Buyers market&#34;</span>, <span style="color:#e6db74">&#34;Balanced market&#34;</span>, <span style="color:#e6db74">&#34;Sellers market&#34;</span>),
</span></span><span style="display:flex;"><span>    guide <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(
</span></span><span style="display:flex;"><span>      order <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      override.aes <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(
</span></span><span style="display:flex;"><span>        shape <span style="color:#f92672">=</span> <span style="color:#ae81ff">21</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>,
</span></span><span style="display:flex;"><span>        alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, stroke <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      )
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_cartesian</span>(clip <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;off&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>    plot.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span>),
</span></span><span style="display:flex;"><span>    plot.subtitle <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>    axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(
</span></span><span style="display:flex;"><span>      orientation <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;left-rotated&#34;</span>,
</span></span><span style="display:flex;"><span>      width <span style="color:#f92672">=</span> grid<span style="color:#f92672">::</span><span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;in&#34;</span>)
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    legend.key <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>)
</span></span><span style="display:flex;"><span>  )
</span></span></code></pre></div></details>
<img src="index.markdown_strict_files/figure-markdown_strict/plot-tightness-1.png" width="768" />
<p>So, there&rsquo;s a lot of competition among buyers, and people looking to sell their houses can expect to be paid more than they anticipated. Dozens of buyers compete for the same properties, driving up the price. The figure below shows the percentage of properties sold compared to the number of properties offered. It&rsquo;s clear that after the 2008 housing bubble crisis, the housing market was still recovering in 2012 and 2013. However, since 2016, more apartments were sold than were put on the market. This means that the number of properties available for the growing number of people wanting to move to Amsterdam is decreasing. This decreases supply in a time with increasing demand, thus pushing the prices higher twice over.</p>
<p class="stand-out-paragraph" 
     
        style="background-color: #acc8d4"
    >
    A new phenomenon that entered the scene a little while ago may indicate how skewed the market is. People wanting to buy a house in a certain neighborhood will put notes and letters in the mailboxes of people living in that area saying <em>&ldquo;Nice house! Are you interested in selling it to me?&rdquo;</em>. This is now not an uncommon strategy to find a house. Some people living in popular neighborshoods are inundated with notes from agencies facilitating these practices. See also a <a href="https://www.rtlnieuws.nl/geld-en-werk/artikel/19001/droomhuis-gezien-maar-niet-te-koop-stop-dan-een-briefje-de-bus">news item by RTL</a>
</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>data <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(type <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Total&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> date, y <span style="color:#f92672">=</span> perc_sold, fill <span style="color:#f92672">=</span> type)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_col</span>(key_glyph <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;point&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, linetype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dashed&#34;</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey20&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Some years, more houses are sold than are being put on the market&#34;</span>,
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Percentage of offered houses sold&#34;</span>,
</span></span><span style="display:flex;"><span>    fill <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    caption <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_**Data**: MVA_&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_cartesian</span>(clip <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;off&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(
</span></span><span style="display:flex;"><span>    labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_percent</span>(),
</span></span><span style="display:flex;"><span>    expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">NA</span>), n.breaks <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_fill_manual</span>(
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> colors,
</span></span><span style="display:flex;"><span>    guide <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(
</span></span><span style="display:flex;"><span>      title.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>, title.hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, nrow <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;right&#34;</span>,
</span></span><span style="display:flex;"><span>      override.aes <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(shape <span style="color:#f92672">=</span> <span style="color:#ae81ff">21</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, stroke <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>    plot.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(
</span></span><span style="display:flex;"><span>      size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>      width <span style="color:#f92672">=</span> grid<span style="color:#f92672">::</span><span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">6</span>, <span style="color:#e6db74">&#34;in&#34;</span>)
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    plot.subtitle <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>    strip.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_markdown</span>(
</span></span><span style="display:flex;"><span>      face <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>,
</span></span><span style="display:flex;"><span>      padding <span style="color:#f92672">=</span> <span style="color:#a6e22e">margin</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;pt&#34;</span>)
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    strip.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>),
</span></span><span style="display:flex;"><span>    legend.key <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span>type, strip.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>, scales <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;free_x&#34;</span>)
</span></span></code></pre></div></details>
<img src="index.markdown_strict_files/figure-markdown_strict/plot-n-sales-1.png" width="960" />
<p>This adds fuel to the fire. I guess I&rsquo;m trying to show that there are a number of factors stacked against young buyers. Any money you have saved up you need to spend to outbid the massive competition. The massive competition means buyers only have a handful of feasible options. Again, because of the massive competition, the chance they actually get to buy one of those options is low. The number of options is not steady either, the number properties sold has overtaken the number of properties being put on the market. There is a dwindling reserve of properties. Combine this with more and more young people wanting to move to the bigger cities and you have a perfect cocktail for a congested housing market. Building new properties can counteract this, but over the last years the Netherlands has actually slowed building new properties.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>decades <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tibble</span>(
</span></span><span style="display:flex;"><span>  x1 <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1920</span>, <span style="color:#ae81ff">2020</span>, <span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  x2 <span style="color:#f92672">=</span> x1 <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">slice</span>(<span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1e2</span>, <span style="color:#ae81ff">2</span>)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(x2 <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2030</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>hist_data_homes <span style="color:#f92672">&lt;-</span> cbsodataR<span style="color:#f92672">::</span><span style="color:#a6e22e">cbs_get_data</span>(<span style="color:#e6db74">&#34;82235NED&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  janitor<span style="color:#f92672">::</span><span style="color:#a6e22e">clean_names</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rename</span>(stock_end <span style="color:#f92672">=</span> eindstand_voorraad_8) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    year <span style="color:#f92672">=</span> <span style="color:#a6e22e">parse_number</span>(perioden),
</span></span><span style="display:flex;"><span>    stock_end <span style="color:#f92672">=</span> stock_end <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e3</span>,
</span></span><span style="display:flex;"><span>    diff <span style="color:#f92672">=</span> stock_end <span style="color:#f92672">-</span> <span style="color:#a6e22e">lag</span>(stock_end)
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>total_hist_plot <span style="color:#f92672">&lt;-</span> hist_data_homes <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> year, y <span style="color:#f92672">=</span> stock_end)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_rect</span>(
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> <span style="color:#a6e22e">tibble</span>(), <span style="color:#a6e22e">aes</span>(xmin <span style="color:#f92672">=</span> <span style="color:#ae81ff">1940.01</span>, xmax <span style="color:#f92672">=</span> <span style="color:#ae81ff">1945</span>, ymin <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#66d9ef">Inf</span>, ymax <span style="color:#f92672">=</span> <span style="color:#66d9ef">Inf</span>),
</span></span><span style="display:flex;"><span>    fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, inherit.aes <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_text</span>(
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> <span style="color:#a6e22e">tibble</span>(),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1942.5</span>, y <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>(hist_data_homes<span style="color:#f92672">$</span>stock_end, na.rm <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)),
</span></span><span style="display:flex;"><span>    label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;WWII&#34;</span>, fontface <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nunito-sans&#34;</span>,
</span></span><span style="display:flex;"><span>    vjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, inherit.aes <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_rect</span>(
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> decades, <span style="color:#a6e22e">aes</span>(xmin <span style="color:#f92672">=</span> x1, xmax <span style="color:#f92672">=</span> x2, ymin <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#66d9ef">Inf</span>, ymax <span style="color:#f92672">=</span> <span style="color:#66d9ef">Inf</span>),
</span></span><span style="display:flex;"><span>    fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey30&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, inherit.aes <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;darkred&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.5</span>, lineend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;round&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Total number of homes&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_continuous</span>(
</span></span><span style="display:flex;"><span>    expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>),
</span></span><span style="display:flex;"><span>    breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(decades<span style="color:#f92672">$</span>x1, decades<span style="color:#f92672">$</span>x2, <span style="color:#ae81ff">2020</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_number</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_cartesian</span>(clip <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>diff_hist_plot <span style="color:#f92672">&lt;-</span> hist_data_homes <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> year, y <span style="color:#f92672">=</span> diff)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey30&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_rect</span>(
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> <span style="color:#a6e22e">tibble</span>(), <span style="color:#a6e22e">aes</span>(xmin <span style="color:#f92672">=</span> <span style="color:#ae81ff">1940.01</span>, xmax <span style="color:#f92672">=</span> <span style="color:#ae81ff">1945</span>, ymin <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#66d9ef">Inf</span>, ymax <span style="color:#f92672">=</span> <span style="color:#66d9ef">Inf</span>),
</span></span><span style="display:flex;"><span>    fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, inherit.aes <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_text</span>(
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> <span style="color:#a6e22e">tibble</span>(), <span style="color:#a6e22e">aes</span>(
</span></span><span style="display:flex;"><span>      x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1942.5</span>,
</span></span><span style="display:flex;"><span>      y <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>(hist_data_homes<span style="color:#f92672">$</span>diff, na.rm <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>),
</span></span><span style="display:flex;"><span>      vjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;WWII&#34;</span>
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, fontface <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>,
</span></span><span style="display:flex;"><span>    family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nunito-sans&#34;</span>, inherit.aes <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_rect</span>(
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> decades, <span style="color:#a6e22e">aes</span>(xmin <span style="color:#f92672">=</span> x1, xmax <span style="color:#f92672">=</span> x2, ymin <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#66d9ef">Inf</span>, ymax <span style="color:#f92672">=</span> <span style="color:#66d9ef">Inf</span>),
</span></span><span style="display:flex;"><span>    fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey30&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, inherit.aes <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey30&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.5</span>, lineend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;round&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_smooth</span>(color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;darkred&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.5</span>, se <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Net homes added per year&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_continuous</span>(
</span></span><span style="display:flex;"><span>    expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>),
</span></span><span style="display:flex;"><span>    breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(decades<span style="color:#f92672">$</span>x1, decades<span style="color:#f92672">$</span>x2, <span style="color:#ae81ff">2020</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_number_auto</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_cartesian</span>(clip <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>total_hist_plot <span style="color:#f92672">/</span> diff_hist_plot <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">plot_annotation</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Number of houses available&#34;</span>,
</span></span><span style="display:flex;"><span>    subtitle <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Data covers development in the Netherlands nationwide&#34;</span>,
</span></span><span style="display:flex;"><span>    caption <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;**Data**: CBS&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">&amp;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(plot.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>))
</span></span></code></pre></div></details>
<img src="index.markdown_strict_files/figure-markdown_strict/plot-n-homes-1.png" width="960" />
<p>The figure displays data from from the CBS through the <code>{cbsodataR}</code> package. It shows an increase in the number of homes after the second World War in the 50s and the 60s. Since around 1975 there&rsquo;s been a decline in the net number of new houses added year-over-year. This while demand hasn&rsquo;t decreased in the same period.</p>
<p>It&rsquo;s also important to mention that between the 60s and 70s, the Netherlands started building entire cities from scratch on newly-reclaimed land from the sea. The province of <a href="https://en.wikipedia.org/wiki/Flevoland">Flevoland</a> is currently home to about 415 000 people, and until the early 50s this province was non-existent, the current land was at the bottom of a bay of the North sea (called the Zuiderzee or &ldquo;Southern Sea&rdquo; in English). Other than a general enthusiasm for building, I think this contributed considerably to the increase in the number of homes added in the 60s and 70s. This new province has good access to Amsterdam, and if it weren&rsquo;t for this new piece of land, the shortage might have peaked earlier.</p>
<div class="sidenote" >There&rsquo;s actually quite a few more, but I&rsquo;ll focus on the ones I can quantify at the moment</div>
<p>But that&rsquo;s not all, there&rsquo;s a few other features that contribute to the gridlock. See, not only young people are on the market to buy apartments in Amsterdam. There&rsquo;s a thriving market for investors looking to take advantage of the rising prices in the Amsterdam housing market (source: <a href="https://www.ad.nl/wonen/beleggers-verwerven-massaal-koophuizen-voor-verhuur-in-amsterdam~afedc50c6/">Algemeen Dagblad</a>). According to the Dutch central bank, about 1 in 5 properties are sold to investors, who are mostly looking to convert it to a rental property or flip it for a profit. I couldn&rsquo;t find the data the Dutch central bank relied on, but I found something else. The Central Bureau for Statistics collects data on the number of &ldquo;mutations&rdquo; among properties. The &ldquo;mutation&rdquo; in this case refers to the change of purpose of a property, e.g. if a house meant for sale is bought and then transformed to a rental property by either private individuals or corporations, or vice versa. I collected this data from the governmental yearly report on the housing market of 2020 (&quot;<em>Staat van de Woningmarkt - Jaarrapportage 2020</em>&quot;, <a href="https://www.rijksoverheid.nl/documenten/rapporten/2020/06/15/staat-van-de-woningmarkt-jaarrapportage-2020">link</a>). Instead of per quarter, this data is reported per year. Unfortunately, the data on housing mutations in the report (from 2020 mind you) only goes until 2017. It&rsquo;s important to note that these numbers are country-wide, not specific for Amsterdam. That means there could be some other factors in play. Many of these trends are present across the country, but they&rsquo;re massively amplified in the larger cities. The data was contained in a pdf that wasn&rsquo;t easily machine-readable, so I had to manually copy the numbers into a tibble, which was great&hellip;</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>house_mutations_in <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tribble</span>(
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">~</span>year, <span style="color:#f92672">~</span>buy_to_rent_corp, <span style="color:#f92672">~</span>buy_to_rent_other, <span style="color:#f92672">~</span>rent_corp_to_buy,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">~</span>rent_corp_to_rent_other, <span style="color:#f92672">~</span>rent_other_to_buy, <span style="color:#f92672">~</span>rent_other_to_rent_corp,
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2012</span>, <span style="color:#ae81ff">900</span>, <span style="color:#ae81ff">58000</span>, <span style="color:#ae81ff">14600</span>, <span style="color:#ae81ff">5500</span>, <span style="color:#ae81ff">50600</span>, <span style="color:#ae81ff">4900</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2013</span>, <span style="color:#ae81ff">800</span>, <span style="color:#ae81ff">62200</span>, <span style="color:#ae81ff">15200</span>, <span style="color:#ae81ff">11500</span>, <span style="color:#ae81ff">50900</span>, <span style="color:#ae81ff">6000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2014</span>, <span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">62200</span>, <span style="color:#ae81ff">15400</span>, <span style="color:#ae81ff">9300</span>, <span style="color:#ae81ff">59900</span>, <span style="color:#ae81ff">39000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2015</span>, <span style="color:#ae81ff">1200</span>, <span style="color:#ae81ff">63700</span>, <span style="color:#ae81ff">12600</span>, <span style="color:#ae81ff">20000</span>, <span style="color:#ae81ff">61300</span>, <span style="color:#ae81ff">7300</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2016</span>, <span style="color:#ae81ff">1300</span>, <span style="color:#ae81ff">77900</span>, <span style="color:#ae81ff">8300</span>, <span style="color:#ae81ff">5300</span>, <span style="color:#ae81ff">62400</span>, <span style="color:#ae81ff">4900</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2017</span>, <span style="color:#ae81ff">1600</span>, <span style="color:#ae81ff">98900</span>, <span style="color:#ae81ff">6400</span>, <span style="color:#ae81ff">11000</span>, <span style="color:#ae81ff">7300</span>, <span style="color:#ae81ff">9000</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>house_mutations <span style="color:#f92672">&lt;-</span> house_mutations_in <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(
</span></span><span style="display:flex;"><span>    cols <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>year,
</span></span><span style="display:flex;"><span>    names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mutation&#34;</span>, values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;n_mutations&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    from <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_extract</span>(mutation, <span style="color:#e6db74">&#34;(.*?)_to&#34;</span>),
</span></span><span style="display:flex;"><span>    from <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_remove_all</span>(from, <span style="color:#e6db74">&#34;_to&#34;</span>),
</span></span><span style="display:flex;"><span>    to <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_extract</span>(mutation, <span style="color:#e6db74">&#34;to_(.*?)$&#34;</span>),
</span></span><span style="display:flex;"><span>    to <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_remove_all</span>(to, <span style="color:#e6db74">&#34;to_&#34;</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(year) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    total_mutations <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n_mutations),
</span></span><span style="display:flex;"><span>    perc_mutations <span style="color:#f92672">=</span> n_mutations <span style="color:#f92672">/</span> total_mutations,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">across</span>(<span style="color:#a6e22e">c</span>(from, to), <span style="color:#f92672">~</span> <span style="color:#a6e22e">case_when</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(.x, <span style="color:#e6db74">&#34;buy&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;buy&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(.x, <span style="color:#e6db74">&#34;rent_corp&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;rent (corporation)&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">str_detect</span>(.x, <span style="color:#e6db74">&#34;rent_other&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;rent (other)&#34;</span>
</span></span><span style="display:flex;"><span>    )),
</span></span><span style="display:flex;"><span>    mutation_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_glue</span>(<span style="color:#e6db74">&#34;From {from} to {to}&#34;</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ungroup</span>()
</span></span></code></pre></div></details>
<p>So not every year there&rsquo;s the same number of &ldquo;mutations&rdquo; (transformations of purpose). That&rsquo;s I thought I&rsquo;d display this data in two different plots, one with the raw values per year, and one with the percentage-wise deconstruction per year. Now obviously, first-time buyers don&rsquo;t care about the percentage houses being taken of the market and being transformed into rental properties, they care about the total number. However, I do think showing the percentage-wise plot makes the trend a bit more clearly.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>mutations_n_plot <span style="color:#f92672">&lt;-</span> house_mutations <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">arrange</span>(from, to) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(mutation_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">fct_inorder</span>(mutation_label)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> year, y <span style="color:#f92672">=</span> n_mutations,
</span></span><span style="display:flex;"><span>    alluvium <span style="color:#f92672">=</span> mutation_label, fill <span style="color:#f92672">=</span> mutation_label
</span></span><span style="display:flex;"><span>  )) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(shape <span style="color:#f92672">=</span> <span style="color:#ae81ff">21</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#66d9ef">NA</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  ggalluvial<span style="color:#f92672">::</span><span style="color:#a6e22e">geom_flow</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Number of mutations&#34;</span>,
</span></span><span style="display:flex;"><span>    fill <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_continuous</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(
</span></span><span style="display:flex;"><span>    labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_number_auto</span>(),
</span></span><span style="display:flex;"><span>    expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_fill_manual</span>(
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> <span style="color:#a6e22e">rev</span>(colors),
</span></span><span style="display:flex;"><span>    guide <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(
</span></span><span style="display:flex;"><span>      title.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>, title.hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, nrow <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;right&#34;</span>,
</span></span><span style="display:flex;"><span>      override.aes <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(
</span></span><span style="display:flex;"><span>        color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>,
</span></span><span style="display:flex;"><span>        alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, stroke <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      )
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(legend.key <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mutations_perc_plot <span style="color:#f92672">&lt;-</span> house_mutations <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">arrange</span>(from, to) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(mutation_label <span style="color:#f92672">=</span> <span style="color:#a6e22e">fct_inorder</span>(mutation_label)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> year, y <span style="color:#f92672">=</span> perc_mutations,
</span></span><span style="display:flex;"><span>    alluvium <span style="color:#f92672">=</span> mutation_label, fill <span style="color:#f92672">=</span> mutation_label
</span></span><span style="display:flex;"><span>  )) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(shape <span style="color:#f92672">=</span> <span style="color:#ae81ff">21</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#66d9ef">NA</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  ggalluvial<span style="color:#f92672">::</span><span style="color:#a6e22e">geom_flow</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Percentage of total mutations per quarter&#34;</span>,
</span></span><span style="display:flex;"><span>    fill <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_continuous</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_percent</span>(), expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_fill_manual</span>(
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> <span style="color:#a6e22e">rev</span>(colors),
</span></span><span style="display:flex;"><span>    guide <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(
</span></span><span style="display:flex;"><span>      title.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>, title.hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, nrow <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;right&#34;</span>,
</span></span><span style="display:flex;"><span>      override.aes <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(
</span></span><span style="display:flex;"><span>        color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>,
</span></span><span style="display:flex;"><span>        alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, stroke <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      )
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>    axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(width <span style="color:#f92672">=</span> grid<span style="color:#f92672">::</span><span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;in&#34;</span>)),
</span></span><span style="display:flex;"><span>    legend.key <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>)
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mutations_n_plot <span style="color:#f92672">/</span> mutations_perc_plot <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">plot_annotation</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Shift to a renters market&#34;</span>,
</span></span><span style="display:flex;"><span>    subtitle <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_A lot more houses meant for sale are being transformed into rental properties than vice versa_&#34;</span>,
</span></span><span style="display:flex;"><span>    caption <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_**Data**: CBS_&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">plot_layout</span>(guides <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;collect&#34;</span>) <span style="color:#f92672">&amp;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(plot.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>))
</span></span></code></pre></div></details>
<img src="index.markdown_strict_files/figure-markdown_strict/plot-housing-n_mutations-1.png" width="960" />
<p>The total number of mutations has hovered around 150 000 since 2012. There was a bump in 2014 when about 40 000 properties were changed from &ldquo;rent (other)&rdquo; to &ldquo;rent (corporation)&rdquo;. The label &ldquo;rent (other)&rdquo; includes mostly private rentals or government-run rental properties, I think. I suspect that in 2014 one of those government-run rental agencies was privatized, causing the bump. The number of mutations from type to type has been fairly consistent until 2016. After 2016 there was a massive drop in the number of private rental properties being put up for sale, and a massive increase in the number of properties meant for sale being added to the private rental market. My guess is that this increase represents investors getting more and more involved in buying up properties and renting them out. Whereas in e.g. 2012, there was about an equal number of properties exchanged between the private rental market and the sale market, this balance is now heavily skewed. Relating this to the previous figures, where we showed that the number of houses sold exceeds the number of houses being put on the market, this also means that among those houses sold, a large number isn&rsquo;t kept in the sale market but rather added to the rental market.</p>
<p>We can look at the net number of houses added to the rental market by adding up the different mutations. Again, prior to 2016, there were slightly more houses added to the sale market than the rental market, but after 2016, this number skyrocketed in favor of the rental market, when tens of thousands of properties were withdrawn from the sale market. Unfortunately I couldn&rsquo;t find any data since then to see if 2017 happened to be an outlier and if this number corrected to a more reasonable number since then.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>net_house_mutations <span style="color:#f92672">&lt;-</span> house_mutations <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(<span style="color:#a6e22e">across</span>(<span style="color:#a6e22e">c</span>(from, to), <span style="color:#f92672">~</span> <span style="color:#a6e22e">case_when</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">str_detect</span>(.x, <span style="color:#e6db74">&#34;rent&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;rent&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">str_detect</span>(.x, <span style="color:#e6db74">&#34;buy&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;buy&#34;</span>
</span></span><span style="display:flex;"><span>  ))) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(year) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(from <span style="color:#f92672">!=</span> to) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(total_mutations <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n_mutations)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(year, from, to) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(
</span></span><span style="display:flex;"><span>    n_mutations <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n_mutations),
</span></span><span style="display:flex;"><span>    total_mutations <span style="color:#f92672">=</span> <span style="color:#a6e22e">first</span>(total_mutations)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_wider</span>(
</span></span><span style="display:flex;"><span>    id_cols <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(year, total_mutations),
</span></span><span style="display:flex;"><span>    names_from <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(from, to),
</span></span><span style="display:flex;"><span>    values_from <span style="color:#f92672">=</span> n_mutations,
</span></span><span style="display:flex;"><span>    names_sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_to_&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(
</span></span><span style="display:flex;"><span>    net_buy_to_rent <span style="color:#f92672">=</span> buy_to_rent <span style="color:#f92672">-</span> rent_to_buy,
</span></span><span style="display:flex;"><span>    perc_buy_to_rent <span style="color:#f92672">=</span> buy_to_rent <span style="color:#f92672">/</span> total_mutations
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>net_mutation_plot <span style="color:#f92672">&lt;-</span> net_house_mutations <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> year, y <span style="color:#f92672">=</span> net_buy_to_rent)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey30&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;darkred&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.5</span>, lineend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;round&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;**Net number of properties changed from properties meant for sale to rental properties**&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(
</span></span><span style="display:flex;"><span>    labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_number_auto</span>(),
</span></span><span style="display:flex;"><span>    limits <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-3e4</span>, <span style="color:#66d9ef">NA</span>), n.breaks <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(width <span style="color:#f92672">=</span> grid<span style="color:#f92672">::</span><span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">3.5</span>, <span style="color:#e6db74">&#34;in&#34;</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>perc_mutation_plot <span style="color:#f92672">&lt;-</span> net_house_mutations <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> year, y <span style="color:#f92672">=</span> perc_buy_to_rent)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey30&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;darkred&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.5</span>, lineend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;round&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;**Percentage of mutations that changed properties meant for sale to rental properties**&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(
</span></span><span style="display:flex;"><span>    labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_percent</span>(),
</span></span><span style="display:flex;"><span>    limits <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>), expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_cartesian</span>(clip <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;off&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(width <span style="color:#f92672">=</span> grid<span style="color:#f92672">::</span><span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">3.5</span>, <span style="color:#e6db74">&#34;in&#34;</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>net_mutation_plot <span style="color:#f92672">+</span> perc_mutation_plot <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">plot_annotation</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Major net shift towards rental market&#34;</span>,
</span></span><span style="display:flex;"><span>    subtitle <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_A lot more houses meant for sale are being transformed into rental properties than vice versa_&#34;</span>,
</span></span><span style="display:flex;"><span>    caption <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_**Data**: CBS_&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">&amp;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(plot.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>))
</span></span></code></pre></div></details>
<img src="index.markdown_strict_files/figure-markdown_strict/net-shift-to-renters-1.png" width="960" />
<p>So in 2017 nearly 90 000 houses were mutated from sale to rental properties. In that same year, about 62 000 new homes were built (source: <a href="https://www.cbs.nl/nl-nl/nieuws/2018/04/hoogste-aantal-nieuwbouwwoningen-in-acht-jaar">CBS</a>). Not all of those 62 000 homes are meant for sale, a proportion are added to the rental market, but even if all those new homes were meant for sale, the sale market still shrunk due to the (net) ~90 000 properties that were transformed and in that way removed from the sale market.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>house_mutations <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> <span style="color:#a6e22e">max</span>(year)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">select</span>(from, to, n_mutations, perc_mutations) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(<span style="color:#a6e22e">across</span>(<span style="color:#a6e22e">c</span>(from, to), <span style="color:#f92672">~</span> <span style="color:#a6e22e">str_to_sentence</span>(.x))) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">arrange</span>(<span style="color:#f92672">-</span>perc_mutations) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">gt</span>() <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fmt_number</span>(
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;n_mutations&#34;</span>, sep_mark <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>,
</span></span><span style="display:flex;"><span>    drop_trailing_zeros <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fmt_percent</span>(columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;perc_mutations&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">grand_summary_rows</span>(
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;n_mutations&#34;</span>,
</span></span><span style="display:flex;"><span>    fns <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(total <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;sum&#34;</span>),
</span></span><span style="display:flex;"><span>    fmt <span style="color:#f92672">=</span> <span style="color:#f92672">~</span> <span style="color:#a6e22e">fmt_number</span>(.),
</span></span><span style="display:flex;"><span>    sep_mark <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>,
</span></span><span style="display:flex;"><span>    drop_trailing_zeros <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">grand_summary_rows</span>(
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;perc_mutations&#34;</span>,
</span></span><span style="display:flex;"><span>    fns <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(total <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;sum&#34;</span>),
</span></span><span style="display:flex;"><span>    fmt <span style="color:#f92672">=</span> <span style="color:#f92672">~</span> <span style="color:#a6e22e">fmt_percent</span>(.),
</span></span><span style="display:flex;"><span>    missing_text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">cols_label</span>(
</span></span><span style="display:flex;"><span>    from <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;From&lt;/h5&gt;&#34;</span>),
</span></span><span style="display:flex;"><span>    to <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;To&lt;/h5&gt;&#34;</span>),
</span></span><span style="display:flex;"><span>    n_mutations <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;Number of mutations&lt;/h5&gt;&#34;</span>),
</span></span><span style="display:flex;"><span>    perc_mutations <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(<span style="color:#e6db74">&#34;&lt;h5&gt;Percentage of total mutations&lt;/h5&gt;&#34;</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tab_header</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;&lt;h3 style=&#39;margin-bottom: 0&#39;&gt;Mutations in the Dutch housing market&lt;/h3&gt;&#34;</span>
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    subtitle <span style="color:#f92672">=</span> <span style="color:#a6e22e">html</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;&lt;h4 style=&#39;margin-top: 0&#39;&gt;&lt;em&gt;Data from the year 2017&lt;/em&gt;&lt;/h4&gt;&#34;</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tab_source_note</span>(source_note <span style="color:#f92672">=</span> <span style="color:#a6e22e">md</span>(<span style="color:#e6db74">&#34;_**Data**: CBS_&#34;</span>)) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tab_options</span>(
</span></span><span style="display:flex;"><span>    table.background.color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#EBEBEB&#34;</span>,
</span></span><span style="display:flex;"><span>    grand_summary_row.text_transform <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;capitalize&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">gtsave</span>(<span style="color:#e6db74">&#34;mutations-table.png&#34;</span>, expand <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
</span></span></code></pre></div></details>
<p>So what&rsquo;s the result of all these phenomena? The figure below shows the housing price index for Amsterdam. The first quarter of 2012 was taken as the reference point (100%). In the past 8(!) years, properties had on average nearly doubled in price.</p>
<details>
<summary>Show code</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>asking_start <span style="color:#f92672">&lt;-</span> data <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(
</span></span><span style="display:flex;"><span>    type <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Total&#34;</span>,
</span></span><span style="display:flex;"><span>    date <span style="color:#f92672">==</span> <span style="color:#a6e22e">min</span>(date)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rename</span>(asking_start <span style="color:#f92672">=</span> asking_price) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">select</span>(type, asking_start)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data_asking_index <span style="color:#f92672">&lt;-</span> data <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(type <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Total&#34;</span>) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">left_join</span>(asking_start) <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(asking_index <span style="color:#f92672">=</span> asking_price <span style="color:#f92672">/</span> asking_start)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data_asking_index <span style="color:#f92672">|&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> date, y <span style="color:#f92672">=</span> asking_index, color <span style="color:#f92672">=</span> type, group <span style="color:#f92672">=</span> type)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.15</span>, lineend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;round&#34;</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_smooth</span>(se <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(size <span style="color:#f92672">=</span> <span style="color:#66d9ef">NA</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Price development over the past decade&#34;</span>,
</span></span><span style="display:flex;"><span>    subtitle <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_On average, properties doubled in value since 2012_&#34;</span>,
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Price development relative to early 2012&#34;</span>,
</span></span><span style="display:flex;"><span>    color <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    caption <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;_**Data**: MVA_&#34;</span>
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span><span style="color:#a6e22e">label_percent</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_manual</span>(
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> colors,
</span></span><span style="display:flex;"><span>    guide <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(
</span></span><span style="display:flex;"><span>      title.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>, title.hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, nrow <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;right&#34;</span>,
</span></span><span style="display:flex;"><span>      override.aes <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>    plot.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>),
</span></span><span style="display:flex;"><span>    axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_textbox</span>(width <span style="color:#f92672">=</span> grid<span style="color:#f92672">::</span><span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">2.5</span>, <span style="color:#e6db74">&#34;in&#34;</span>)),
</span></span><span style="display:flex;"><span>    legend.key <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;transparent&#34;</span>)
</span></span><span style="display:flex;"><span>  )
</span></span></code></pre></div></details>
<img src="index.markdown_strict_files/figure-markdown_strict/plot-asking-index-increase-1.png" width="960" />
<div class="sidenote" >Inflation since 2012 was about 8.5% which should be subtracted from these values</div>
<p>Adjusted for the number of properties offered, the average asking price in Amsterdam has increased by 107%. That means that prices since 2012 have (on average) roughly doubled. For apartments, this increase was 110%. So young people wanting to buy a house in Amsterdam need to bring nearly twice as much money to the table as they did just a decade ago. The money they saved and the salaries they earned have by no means kept up with the increasing price though.</p>
<p>I cannot know this for sure, because the data I presented here doesn&rsquo;t contain the answer, but perhaps these factors combined play a role in the financial uncertainty that millenials experience. How do we fix it? I&rsquo;m not sure. This is a really complicated issue. But a few things might (in my opinion) help:</p>
<ul>
<li>
<p><strong>Build more (sustainable) durable houses</strong></p>
</li>
<li>
<p><strong>Prohibit sale of properties to individuals who don&rsquo;t plan to live there themselves for at least 2 or 3 years</strong></p>
</li>
<li>
<p><strong>Increase transparency when buying or selling a house through mandatory public offerings to prevent scooping by investors</strong></p>
</li>
<li>
<p><strong>Rent control to make <em>&ldquo;mutating&rdquo;</em> houses less profitable</strong></p>
</li>
<li>
<p><strong>Increased socialized housing for poor and low-income families</strong></p>
</li>
</ul>
<p>Perhaps if we implement a few of these strategies we can make the housing market a little fairer and perhaps ensure that future generations will have the same opportunities current home-owners have.</p>
<p><strong>EDIT (2021-12-03)</strong>: Reintroduce the code to wrangle the data, generate the figures and tables etc. to the main document and put the code inside unfoldable tags to make it easier to see the code associated with a particular step while maintaining legibility.</p>

</div>

        </div>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/foundation.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
<script>
  hljs.highlightAll();
</script>


<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script>
  MathJax = {
      tex: {
        inlineMath: [ ['$','$'] ]
      }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"></script>


<script src="https://unpkg.com/feather-icons"></script>
<script>
  feather.replace()
</script>

<div id="nav-border" class="container">
    
    <div class="nav-outer">
        <div class="nav-inner">
            
                
                    
                        <a class="internal" hyphens="none" href="/">
                            
                            Home
                        </a>
                    
                
                    
                        <a class="internal" hyphens="none" href="/blog">
                            
                            Blog
                        </a>
                    
                
                    
                
                    
                        <a class="internal" hyphens="none" href="/publications">
                            
                            Publications
                        </a>
                    
                
                    
                        <a class="internal" hyphens="none" href="/cv">
                            
                            CV
                        </a>
                    
                
                    
                        <a class="internal" hyphens="none" href="/about">
                            
                            About
                        </a>
                    
                
            
        </div>
    </div>
    
</div>

</body>
</html>
